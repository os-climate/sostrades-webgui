<mat-card class="section-item-card">
  <mat-card-content class="section-item-content">
    <!--    Title Area  -->
    <div class="section-header">
      <!-- Display mode -->
      <div [hidden]="isEditing" class="section-content">
        <div class="card-actions">
          <button mat-button color="warn" (click)="deleteTextItem(sectionItem)" matTooltip="Delete section">
            <i class="fa-solid fa-trash"></i>
            Delete
          </button>
        </div>
        <div class="content-wrapper" (click)="startEditing()">
          <div *ngIf="sectionItem.data.title && sectionItem.data.title.trim() !== ''" class="quill-content">
            <quill-view-html [content]="sectionItem.data.title" theme="snow"></quill-view-html>
          </div>
        </div>
      </div>

      <!-- Edit mode -->
      <div [hidden]="!isEditing" class="edit-content">
        <div class="edit-actions">
          <button mat-button color="primary" (click)="saveChanges()">Save</button>
          <button mat-button color="primary" (click)="cancelEditing()">Cancel</button>
          <button mat-button color="warn" (click)="deleteTextItem(sectionItem)" matTooltip="Delete section">
            <i class="fa-solid fa-trash"></i>
            Delete
          </button>
        </div>
        <quill-editor [(ngModel)]="editableContent" [modules]="editModules" (onEditorCreated)="onEditorCreated($event)">
        </quill-editor>
      </div>
    </div>
    <!--    Separator Line  -->
    <div class="section-separator"></div>

    <!--    Graphs Area  -->
    <div class="section-graph">
      <div *ngIf="sectionItem.data.children && sectionItem.data.children.length > 0" class="graph-container">
        <div *ngFor="let child of sectionItem.data.children" class="graph-item">
          <app-post-processing-plotly
            [class]="child.data && child.data.graphData && child.data.graphData[0]?.type === 'table' ? 'table' : 'plot'"
            [fullNamespace]=""
            [plotData]="child.data.graphData"
            [disciplineName]="child.disciplineName"
            [name]="child.name"
            [plotIndex]="child.plotIndex">
          </app-post-processing-plotly>
        </div>
      </div>
      <div *ngIf="!sectionItem.data.children || sectionItem.data.children.length === 0" class="no-graphs">
        No graphs available in this section
      </div>
    </div>
  </mat-card-content>
</mat-card>
