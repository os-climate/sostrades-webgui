<mat-card class="section-item-card">
  <mat-card-content class="section-item-content">
    <!--    Title Area  -->
    <div [ngClass]="this.sectionItem.data.shown ? 'show-section-header' : 'hidden-section-header'">
      <div class="card-actions" [hidden]="!inEditionMode">
        <button mat-button color="warn" (click)="deleteTextItem(sectionItem)" matTooltip="Delete section">
          <i class="fa-solid fa-trash"></i>
        </button>
        <button mat-button color="primary" class="drag-handle" matTooltip="Move section">
          <i class="fa-solid fa-arrows-up-down-left-right"></i>
        </button>
        <button mat-button color="primary" (click)="startEditingSection()" matTooltip="Edit section">
          <i class="fa-solid fa-pen-to-square"></i>
        </button>
      </div>
      <div class="expansion-button">
        <button mat-button color="primary" [matTooltip]="this.sectionItem.data.shown ? 'Hide graphs' : 'Show graphs'" (click)="toggleExpandSection()">
          <i [ngClass]="this.sectionItem.data.shown ? 'fa-solid fa-chevron-down' : 'fa-solid fa-chevron-up'"></i>
        </button>
      </div>
      <div [ngClass]="inEditionMode ? 'edit-content-wrapper' : 'content-wrapper'" (click)="startEditingTitle()">
        <div *ngIf="sectionItem.data.title && sectionItem.data.title.trim() !== ''" class="quill-content">
          <quill-view-html [content]="sectionItem.data.title" theme="snow"></quill-view-html>
        </div>
        <div *ngIf="!sectionItem.data.title || sectionItem.data.title.trim() === ''" class="empty-content">
          Click to edit
        </div>
      </div>
    </div>

    <!--    Separator Line  -->
    <div class="section-separator" [hidden]="!this.sectionItem.data.shown"></div>

    <!--    Graphs Area  -->
    <div class="section-graph" [hidden]="!this.sectionItem.data.shown">
      <div *ngIf="sectionItem.data.children && sectionItem.data.children.length > 0" class="graph-container">
        <div *ngFor="let child of sectionItem.data.children" class="graph-item">
          <app-post-processing-plotly
            [class]="child.data && child.data.graphData && child.data.graphData[0]?.type === 'table' ? 'table' : 'plot'"
            [fullNamespace]=""
            [plotData]="child.data.graphData"
            [disciplineName]="child.disciplineName"
            [name]="child.name"
            [plotIndex]="child.plotIndex">
          </app-post-processing-plotly>
        </div>
      </div>
      <div *ngIf="!sectionItem.data.children || sectionItem.data.children.length === 0" class="no-graphs">
        No graphs available in this section
      </div>
    </div>
  </mat-card-content>
</mat-card>
